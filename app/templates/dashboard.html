<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Twitter-Like UI Styles */

/* Global Reset */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Helvetica Neue', Arial, sans-serif;
    background-color: #f5f8fa;
    color: #14171a;
    display: flex;
    justify-content: center;
}

.container {
    display: flex;
    width: 100%;
    max-width: 1200px;
}

/* Left Sidebar */
.sidebar-left {
    width: 250px;
    height: 100vh;
    background: #ffffff;
    border-right: 1px solid #e1e8ed;
    padding: 20px;
    position: fixed;
    left: 0;
}

.sidebar-left nav {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.sidebar-left a {
    text-decoration: none;
    color: #14171a;
    font-size: 20px;
    font-weight: bold;
    padding: 10px;
    display: flex;
    align-items: center;
    gap: 10px;
    border-radius: 25px;
    transition: background 0.3s;
}

.sidebar-left a:hover {
    background: #e8f5fe;
    color: #1da1f2;
}

/* Feed Section */
.feed {
    width: 600px;
    margin-left: 260px;
    padding: 20px;
    border-right: 1px solid #e1e8ed;
}

.feed-header {
    font-size: 20px;
    font-weight: bold;
    padding: 15px 0;
    border-bottom: 1px solid #e1e8ed;
    background: white;
    position: sticky;
    top: 0;
    z-index: 10;
}

.post-box {
    background: white;
    border: 1px solid #e1e8ed;
    border-radius: 10px;
    padding: 15px;
    margin: 10px 0;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.post-box textarea {
    border: none;
    resize: none;
    width: 100%;
    font-size: 16px;
}

.post-box-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 10px;
}

.post-box-actions button {
    background: #1da1f2;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 20px;
    font-weight: bold;
    cursor: pointer;
}

.post-box-actions button:hover {
    background: #0d8de0;
}

/* Posts */
.post {
    background: white;
    padding: 15px;
    border-bottom: 1px solid #e1e8ed;
    display: flex;
    gap: 10px;
}

.post img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
}

.post-content {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.post-actions {
    display: flex;
    gap: 20px;
    color: #657786;
    font-size: 14px;
    cursor: pointer;
}

.post-actions i:hover {
    color: #1da1f2;
}

/* Right Sidebar */
.sidebar-right {
    width: 300px;
    height: 100vh;
    padding: 20px;
    background: #ffffff;
    position: fixed;
    right: 0;
    border-left: 1px solid #e1e8ed;
}

.search-box input {
    width: 100%;
    padding: 10px;
    border: 1px solid #e1e8ed;
    border-radius: 20px;
    background: #f5f8fa;
    font-size: 14px;
}

/* Responsive Design */
@media (max-width: 1024px) {
    .sidebar-right {
        display: none;
    }
    .feed {
        margin-left: 260px;
        width: calc(100% - 260px);
    }
}

@media (max-width: 768px) {
    .sidebar-left {
        width: 60px;
    }
    .feed {
        margin-left: 70px;
        width: calc(100% - 70px);
    }
    .sidebar-left a span {
        display: none;
    }
}

@media (max-width: 480px) {
    .sidebar-left {
        display: none;
    }
    .feed {
        margin-left: 0;
        width: 100%;
    }
}
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <h1>Welcome back, {{ username }}</h1>
        <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo">
    </header>



    <!-- Dashboard -->
    <div class="dashboard">
        <!-- Left Column -->
        <div class="menu">
            <button><i class="fa fa-home"></i> Home</button>
            <a href="{{ url_for('routes.explore') }}">
                <button><i class="fa fa-compass"></i> Explore</button>
            </a>
            <button><i class="fa fa-bell"></i> Notifications</button>
            <a href="{{ url_for('routes.messages') }}">
               <button><i class="fa fa-envelope"></i> Messages</button>
            </a>   
            <a href="{{ url_for('routes.marketplace') }}">
               <button><i class="fa fa-store"></i> Marketplace</button>
            </a>   
            <a href="{{ url_for('routes.edit_profile') }}">
                <button><i class="fa fa-user"></i> Profile</button>
            </a>
            <a href="{{ url_for('routes.ad') }}">
                <button><i class="fa fa-bullhorn"></i> Ads</button>
            </a>    
            <button><i class="fa fa-crown"></i> Premium</button>
            <button><i class="fa fa-paint-brush"></i> Artistries</button>
            <a href="{{ url_for('routes.story') }}">
                <button><i class="fa fa-book"></i>Storyland</button>
            </a>
            <button><i class="fa fa-chart-line"></i> Analytics</button>
            <a href="{{ url_for('routes.groups') }}">
                <button><i class="fa fa-users"></i> Groups</button>
            </a>  
            <a href="{{ url_for('routes.startup_toolkit') }}">
                <button><i class="fa fa-briefcase"></i>Startup Toolkit</button>
            </a>      
            <button><i class="fa fa-paw"></i> Pets</button>
            <button><i class="fa fa-cogs"></i> Settings</button>
            <a href="{{ url_for('routes.all_events') }}">
                <button><i class="fa fa-calendar-alt"></i>Events</button>
            </a>
            <button id="job-dashboard-btn"><i class="fa fa-briefcase"></i> Jobs & Services</button>   
            <button><i class="fa fa-plus-circle"></i> Create Post</button>
            <div id="job-dashboard-content" style="display:none;">
                <!-- Content will be inserted here -->
            </div>
        </div>
        

       <!-- Ads Section -->
{% if active_ads %}
<div class="ads-section">
    <h4>Sponsored</h4>
    {% for ad in active_ads %}
        <div class="ad">
            <h5>{{ ad.title }}</h5>
            <p>{{ ad.description }}</p>
            <img src="{{ ad.media_url }}" alt="Ad Image">
        </div>
    {% endfor %}
</div>
{% endif %}

<!-- Center Column -->
<div class="feed">
<div class="tabs">
    <button class="active">For You</button>
    <a href="{{ url_for('routes.following') }}">
        <button>Following</button>
    </a>
</div>
<div class="post-box">
    <div class="post-box-top">
        <img src="{{ url_for('static', filename='user_profile.png') }}" alt="User">
        <form action="{{ url_for('routes.create_post') }}" method="POST">
            <textarea name="content" placeholder="What's on your mind?" rows="3" required></textarea><br>
            <button type="submit">Share</button>
        </form>
    </div>
    <div class="post-box-actions">
        <div class="icons">
            <i class="fa fa-image" title="Upload Image"></i>
            <i class="fa fa-video" title="Upload Video"></i>
            <i class="fa fa-file-image" title="Upload GIF"></i>
            <i class="fa fa-smile" title="Add Emoji"></i>
            <i class="fa fa-calendar" title="Schedule Post"></i>
        </div>
    </div>
</div>

<div class="posts">
    {% for post in posts %}
        <div class="post">
            <a href="{{ url_for('routes.user_profile', user_id=post.user.id) }}">
                {{ post.user.username }}
            </a>
            <div class="content">{{ post.content }}</div>
            <div class="tags">
                <strong>Tags:</strong>
                <ul>
                    {% for tag in post.tags %}
                        <li>{{ tag.name }}</li>
                    {% endfor %}
                </ul>
            </div>
            <div class="actions">
                <i class="fa fa-thumbs-up" title="Like" onclick="likePost({{ post.id }})"></i>
                <i class="fa fa-comment" title="Comment" onclick="toggleCommentBox({{ post.id }})"></i>
                <i class="fa fa-share" title="Share" onclick="sharePost({{ post.id }})"></i>
            </div>
            <div class="post-box-actions comment-box" id="comment-box-{{ post.id }}" style="display: none;">
                <textarea placeholder="Add a comment..." rows="2"></textarea><br>
                <button onclick="submitComment({{ post.id }})">Post Comment</button>
            </div>
        </div>
    {% endfor %}
</div>
</div>

<!-- Right Sidebar -->
<div class="sidebar">
<div class="search-box">
    <input type="text" placeholder="Search...">
</div>
<div class="trending">
    <h3>Trending Topics</h3>
    <ul>
        {% for topic in trending_topics %}
            <li>#{{ topic }}</li>
        {% endfor %}
    </ul>
</div>
<div class="suggestions">
    <h3>Who to Follow</h3>
    <ul>
        {% for suggested_user in suggested_users %}
            <li>
                <div class="user-card">
                    <img src="{{ url_for('static', filename=suggested_user.profile_picture) }}" alt="{{ suggested_user.username }}'s profile picture">
                    <span>{{ suggested_user.username }}</span>
                    <button onclick="followUser({{ suggested_user.id }})">Follow</button>
                </div>
            </li>
        {% endfor %}
    </ul>
</div>
</div>


    <script>
        let likes = {}; // Store like counts per post

        function likePost(postId) {
            if (!likes[postId]) {
                likes[postId] = 1;
            } else {
                likes[postId]++;
            }
            alert("Post liked! Total likes: " + likes[postId]);
        }

        function toggleCommentBox(postId) {
            // Get the comment box element for the given post
            const commentBox = document.getElementById(`comment-box-${postId}`);
            
            // Toggle the visibility of the comment box
            if (commentBox.style.display === "none" || commentBox.style.display === "") {
                commentBox.style.display = "block";
            } else {
                commentBox.style.display = "none";
            }
        }
    
        function submitComment(postId) {
            const commentBox = document.getElementById(`comment-box-${postId}`);
            const textarea = commentBox.querySelector('textarea');
            const comment = textarea.value.trim();
    
            if (comment) {
                // Call your backend to submit the comment for the post
                // Example: submitCommentToBackend(postId, comment);
                console.log(`Submitting comment for post ${postId}: ${comment}`);
            }
        }

        function sharePost(postId) {
            alert("Post shared! Post ID: " + postId);
        }

        document.getElementById('job-dashboard-btn').addEventListener('click', function() {
            var jobContentDiv = document.getElementById('job-dashboard-content');
    
            // If the content is hidden, show it by fetching the job dashboard content
            if (jobContentDiv.style.display === 'none') {
                fetch('/job_dashboard')  // Make a request to load the job dashboard content
                    .then(response => response.text())
                    .then(data => {
                        jobContentDiv.innerHTML = data;  // Insert the job dashboard HTML content
                        jobContentDiv.style.display = 'flex';  // Show the job dashboard
                    })
                    .catch(error => {
                        console.error('Error fetching job dashboard:', error);
                        alert('Failed to load job dashboard content.');
                    });
            } else {
                jobContentDiv.style.display = 'none';  // Hide the content if it's already shown
            }
        });

        document.querySelector('.message-icon').addEventListener('click', function() {
            // This could open your chat interface or pop-up
            alert('Open chat interface!');
        });
    </script>
</body>
</html>